# Vue3 相对于 Vue2 的重点优化与常用功能升级

---

## 一、性能优化

1. **更快的虚拟 DOM**  
   Vue3 重写了虚拟 DOM，渲染性能提升，内存占用更低。
2. **更小的体积**  
   Vue3 支持 Tree-shaking，未用到的 API 不会被打包，核心包更轻量。
3. **更快的启动和更新速度**  
   响应式系统升级，依赖收集和触发更高效。

---

## 二、响应式系统升级

1. **Proxy 替代 Object.defineProperty**  
   Vue3 用 Proxy 实现响应式，支持数组和对象的新增/删除属性，性能更好。
2. **更灵活的响应式 API**  
   新增 `ref`、`reactive`、`computed`、`watch` 等组合式 API，响应式粒度更细。

---

## 三、组合式 API（Composition API）

1. **setup() 函数**  
   组件逻辑集中在 `setup()`，更易组织和复用代码。
2. **逻辑复用更简单**  
   可通过自定义组合函数（composables）复用逻辑，替代 mixins。
3. **类型推断更友好**  
   TypeScript 支持更完善，类型推断更准确。

---

## 四、TypeScript 支持

1. **官方推荐**  
   Vue3 源码和 API 都以 TypeScript 编写，类型安全，开发体验更好。
2. **类型推断**  
   组件 props、emit、slots 等均支持类型推断。

---

## 五、Fragment、Teleport、Suspense 新特性

1. **Fragment**  
   组件可返回多个根节点，无需额外包裹元素。
2. **Teleport**  
   可将内容渲染到 DOM 的任意位置，常用于弹窗、模态框。
3. **Suspense**  
   支持异步组件加载和占位渲染，提升用户体验。

---

## 六、生命周期钩子变化

- 生命周期钩子命名统一为 `onMounted`、`onUpdated`、`onUnmounted` 等，更易理解和记忆。

---

## 七、其它常用功能升级

1. **更灵活的自定义指令和组件事件**  
   事件监听、指令钩子更丰富。
2. **更好的异步组件和动态导入支持**  
   异步组件加载更简单，支持 `defineAsyncComponent`。
3. **更优的模板编译和静态提升**  
   编译优化，静态节点提升，减少运行时开销。

---

## 八、实际开发常用升级点

- 用 `setup()` 和组合式 API 组织复杂逻辑
- 用 `ref`/`reactive` 实现响应式数据
- 用 `watch`/`computed` 处理数据变化和派生值
- 用 TypeScript 编写类型安全组件
- 用 Teleport 实现弹窗、抽屉等 UI
- 用 Suspense 优化异步数据加载体验
- 用 Fragment 减少无意义的 DOM 层级
- 用 defineAsyncComponent 实现组件懒加载

---

**总结：**  
Vue3 在性能、响应式、类型支持、逻辑复用和新特性等方面全面升级，实际开发中推荐优先使用组合式 API、TypeScript、Teleport、Suspense 等新功能，提升项目质量和开发效率。