# Redis：高速灵活的临时数据管家

Redis 可以简单理解成 **“电脑里的高速储物柜”**—— 它把数据存在内存里（不是硬盘），所以存、取数据特别快，还能灵活存各种类型的信息，日常开发里经常用它解决 “数据要快读快写” 的问题。

### 一、Redis 最核心的 4 个特点（为什么大家爱用它？）

#### 1. 快到飞起：内存直接读写

普通数据库（比如 MySQL）把数据存在硬盘里，读数据要等硬盘转，像从衣柜里翻衣服；

Redis 把数据存在内存里，就像从口袋里掏手机，速度差几十到几百倍 —— 每秒能处理几十万次读写，适合对速度要求高的场景（比如秒杀活动、实时排行榜）。

#### 2. 能存多种 “东西”：不止存文字

不像有些工具只能存 “钥匙 - 文字”（比如存 `name: 小明`），Redis 支持多种数据类型，像个 “多功能储物柜”：



* 字符串（String）：存简单文字 / 数字（比如用户昵称、文章阅读量）；

* 列表（List）：存一串有序数据（比如朋友圈评论列表，按时间排好）；

* 哈希（Hash）：存 “对象”（比如用户信息：`user:100 {name:小明, age:20, city:北京}`）；

* 集合（Set）：存不重复的无序数据（比如某篇文章的点赞用户，避免重复统计）；

* 有序集合（ZSet）：存带排序的不重复数据（比如游戏排行榜，按分数从高到低排）。

#### 3. 数据不会 “丢”：能存到硬盘

虽然数据在内存里，但 Redis 能定期把内存里的数据 “备份” 到硬盘（两种方式）：



* 像 “拍照存档”（RDB）：比如每小时拍一张 “数据快照”，丢了可以恢复到最近的快照；

* 像 “写日记”（AOF）：把每一次操作都记下来，丢了可以按日记重新 “复现” 所有操作。

  两种方式结合，基本能保证数据不丢（除非硬盘也坏了）。

#### 4. 能 “分身”：多台机器一起用

如果一台 Redis 不够用（比如数据太多存不下，或者怕它坏了），可以搞 “主从复制”：



* 1 个 “主 Redis”（负责写数据，比如存新用户）；

* 多个 “从 Redis”（负责读数据，比如用户查自己信息）；

  还能加 “哨兵”（监控主 Redis，主的坏了自动让从的顶上），保证服务不中断。

### 二、Redis 最常用的 5 个场景（什么时候该用它？）

#### 1. 缓存：帮数据库 “减负”

比如电商 APP 的首页商品数据 —— 如果每次用户打开都去查数据库，数据库会累死；

可以把首页数据先存到 Redis 里（这叫 “缓存”），用户打开时直接从 Redis 拿，1 秒加载完；数据库只需要定期把新数据更到 Redis 里就行。

#### 2. 计数器：实时统计数据

比如文章阅读量、视频播放量、APP 下载量 —— 每有人点击一次，就用 Redis 的 `INCR` 命令（比如 `INCR article:100:read`），一秒钟能统计几万次，还不会算错（ Redis 是单线程，不会出现 “多个人点了但只算 1 次” 的问题）。

#### 3. 消息队列：帮系统 “排队办事”

比如 APP 的推送消息（比如 “您有新订单”）—— 如果一下子有 10 万条推送，直接发给用户会卡死；

可以把推送消息存到 Redis 的 List 里（像排队买票），系统再一条一条从队列里拿出来发，不会乱也不会漏。

#### 4. 分布式锁：多服务器 “不争抢”

比如秒杀活动 ——100 台服务器同时卖 1 件商品，怎么保证只卖出去 1 次？

可以用 Redis 的 `SETNX` 命令（“只有没人占的时候才能抢到锁”）：某台服务器抢到锁，就可以卖商品；卖完释放锁，其他服务器再抢，避免 “超卖”。

#### 5. 过期数据自动删：不用手动清理

比如手机验证码（5 分钟有效）、临时登录 Token（2 小时有效）—— 存的时候用 `SET key value EX 300`（300 秒后自动删），到期 Redis 会自己把数据清掉，不用写代码手动删，省事儿。

### 三、Redis 最基础的 3 个操作（简单上手）

Redis 用 “命令” 操作，就像给储物柜发指令，常用的就几个：



1. 存数据：`SET 钥匙 内容`（比如 `SET user:100 小明`，把 “小明” 存在 “user:100” 这个钥匙下）；

2. 取数据：`GET 钥匙`（比如 `GET user:100`，就能拿到 “小明”）；

3. 删数据：`DEL 钥匙`（比如 `DEL user:100`，就把 “user:100” 的数据删了）；

4. 设过期时间：`SET 钥匙 内容 EX 秒数`（比如 `SET code 123456 EX 300`，验证码 123456，5 分钟后自动删）。

### 四、用 Redis 要注意的 3 个坑



1. **内存有限，别存太大 / 太多数据**：内存比硬盘贵，Redis 适合存 “小而高频访问” 的数据（比如缓存、计数器），别把大文件（比如视频、图片）塞进去；

2. **过期时间别乱设**：如果存的数据没设过期时间，又不手动删，内存会被占满，最后 Redis 会 “淘汰” 老数据（可以自己设置淘汰规则，比如删最少用的）；

3. **别依赖单机**：单台 Redis 万一死机，服务就断了，所以正式环境一定要搞 “主从 + 哨兵”，多台机器一起扛。

### 总结一下

Redis 就是个 **“高速、灵活、靠谱的临时数据管家”**—— 哪里需要 “快读快写”，哪里需要 “灵活存数据”，哪里就可以用它。不用深究底层原理，先记住 “它快、能存多种数据、能备份、常用在缓存 / 计数器 / 队列”，就能应对大部分日常开发场景了。

要不要我帮你整理一份 **Redis 常用命令速查表**？按 “场景分类”（比如缓存、计数器、队列），把每个场景下最常用的命令列出来，方便你直接查用。

> （注：文档部分内容可能由 AI 生成）