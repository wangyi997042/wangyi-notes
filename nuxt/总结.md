# Nuxt 全面总结（以 Nuxt 3 为例）

---

## 一、Nuxt 是什么？

Nuxt 是基于 Vue 的高层框架，支持服务端渲染（SSR）、静态站点生成（SSG）、单页应用（SPA）等多种模式，极大提升 Vue 项目的开发效率和工程化能力。Nuxt 3 基于 Vite、Vue 3、TypeScript，性能和体验更优。

---

## 二、核心功能与特性

- **自动路由**：`pages` 目录自动生成路由
- **布局系统**：`layouts` 目录定义全局/局部布局
- **中间件**：支持页面/路由/全局中间件
- **服务端渲染（SSR）**：提升首屏速度和 SEO
- **静态站点生成（SSG）**：一键生成纯静态页面
- **API 路由**：`server/api` 目录直接写后端接口
- **自动导入**：组件、composables、store、utils 等自动导入
- **Pinia 状态管理**：内置支持 Pinia
- **模块系统**：丰富的官方/第三方模块（如 auth、i18n、pwa、content 等）
- **TypeScript 支持**：开箱即用
- **SEO 优化**：自动 meta、OG、结构化数据
- **热重载与开发体验**：Vite 极速热更新
- **插件机制**：支持全局插件、运行时插件
- **服务端中间件**：支持自定义 server middleware
- **环境变量与配置**：灵活的 nuxt.config.ts

---

## 三、项目结构与目录说明

```
my-nuxt-app/
├─ app.vue           # 应用主入口
├─ nuxt.config.ts    # Nuxt 配置文件
├─ pages/            # 页面文件，自动生成路由
├─ layouts/          # 布局文件
├─ components/       # 组件
├─ composables/      # 组合式函数（自动导入）
├─ plugins/          # 插件
├─ middleware/       # 路由/页面中间件
├─ server/           # API 路由、server middleware
├─ public/           # 静态资源
├─ assets/           # 样式、图片等资源
├─ store/            # Pinia 状态管理
```

---

## 四、常用功能与详细示例

### 1. 自动路由（pages）

**文件结构：**
```
pages/
  index.vue         # /
  about.vue         # /about
  blog/
    [id].vue        # /blog/123
```

**示例：**
```vue
<!-- pages/about.vue -->
<template>
  <div>关于我们</div>
</template>
```

---

### 2. 布局系统（layouts）

**默认布局：**
```vue
<!-- layouts/default.vue -->
<template>
  <div>
    <header>头部</header>
    <slot />
    <footer>底部</footer>
  </div>
</template>
```

**页面指定布局：**
```vue
<!-- pages/about.vue -->
<script setup>
definePageMeta({ layout: 'default' })
</script>
```

---

### 3. 页面导航与 NuxtLink

```vue
<template>
  <div>
    <NuxtLink to="/">首页</NuxtLink>
    <NuxtLink to="/about">关于</NuxtLink>
  </div>
</template>
```

---

### 4. 页面元信息与 SEO

```vue
<script setup lang="ts">
useSeoMeta({
  title: '我的 Nuxt 站点',
  description: '这是一个 Nuxt 3 示例',
  ogTitle: '我的 Nuxt 站点',
  ogDescription: 'SEO 优化描述',
  ogImage: 'https://example.com/og.png',
  twitterCard: 'summary_large_image',
})
</script>
```

---

### 5. 中间件（middleware）

**定义全局中间件：**
```js
// middleware/auth.global.ts
export default defineNuxtRouteMiddleware((to, from) => {
  const user = useUserStore()
  if (!user.isLoggedIn && to.path !== '/login') {
    return navigateTo('/login')
  }
})
```

**页面中间件：**
```js
<script setup>
definePageMeta({ middleware: 'auth' })
</script>
```

---

### 6. API 路由（server/api）

**创建接口：**
```ts
// server/api/hello.ts
export default defineEventHandler(() => {
  return { message: 'Hello from API!' }
})
```
**前端调用：**
```js
const { data } = await useFetch('/api/hello')
```

---

### 7. 组合式函数（composables）

**定义：**
```js
// composables/useCounter.ts
export const useCounter = () => {
  const count = ref(0)
  const inc = () => count.value++
  return { count, inc }
}
```
**使用：**
```js
const { count, inc } = useCounter()
```

---

### 8. Pinia 状态管理（store）

**定义 store：**
```js
// store/counter.ts
import { defineStore } from 'pinia'
export const useCounterStore = defineStore('counter', {
  state: () => ({ count: 0 }),
  actions: {
    increment() { this.count++ }
  }
})
```
**使用 store：**
```js
<script setup>
const counter = useCounterStore()
</script>
<template>
  <button @click="counter.increment">加一</button>
  <span>{{ counter.count }}</span>
</template>
```

---

### 9. 插件（plugins）

**定义插件：**
```js
// plugins/hello.ts
export default defineNuxtPlugin(nuxtApp => {
  nuxtApp.provide('hello', () => 'Hello from plugin!')
})
```
**使用插件：**
```js
const { $hello } = useNuxtApp()
console.log($hello())
```

---

### 10. 自动导入

- `components/`、`composables/`、`store/` 下的内容会自动导入，无需手动 import。
- 也支持自动导入 Vue、Pinia、Nuxt 的常用 API。

---

### 11. 静态资源与 public 目录

- `public/` 下的文件可通过 `/xxx.png` 直接访问。

---

### 12. 环境变量

- `.env` 文件定义变量，`NUXT_PUBLIC_` 前缀的变量可在客户端访问。
- 通过 `useRuntimeConfig()` 获取运行时配置。

---

### 13. TypeScript 支持

- Nuxt 3 默认支持 TypeScript，配置文件为 `nuxt.config.ts`。

---

### 14. SSR/SSG/SPA 模式切换

- 默认 SSR，可通过 `nuxt.config.ts` 配置 `ssr: false` 切换为 SPA。
- 通过 `nuxi generate` 生成静态站点（SSG）。

---

### 15. 热重载与开发体验

- `npm run dev` 启动开发服务器，支持热重载。
- `npm run build` 构建生产包。
- `npm run preview` 预览生产包。

---

### 16. 常用 Nuxt 组件

- `<NuxtPage />`：当前路由页面内容
- `<NuxtLayout />`：当前布局
- `<NuxtLink />`：路由跳转
- `<ClientOnly>`：仅客户端渲染内容
- `<Head>`：自定义页面 head 标签

---

### 17. 常用模块举例

- `@nuxt/content`：内容管理与 Markdown 渲染
- `@nuxt/auth`：认证模块
- `@nuxt/image`：图片优化
- `@nuxt/i18n`：国际化
- `@nuxt/pwa`：PWA 支持

---

## 五、常见问题与调试

- **页面不显示？** 检查 `pages/` 目录和 `<NuxtPage />` 是否正确。
- **API 路由 404？** 检查 `server/api/` 目录和文件命名。
- **自动导入失效？** 检查目录结构和文件命名。
- **环境变量未生效？** 检查 `.env` 文件和变量前缀。

---

## 六、参考资料

- [Nuxt 官方文档](https://nuxt.com/docs)
- [Nuxt 3 中文文档](https://www.nuxtjs.cn/docs/getting-started/introduction)
- [Nuxt 3 Awesome](https://github.com/nuxt/awesome-nuxt)

---

**总结：**
Nuxt 3 是 Vue 生态下最强大的 SSR/SSG 框架，自动路由、API、布局、状态管理、插件、SEO、模块等功能极大提升开发效率。建议多实践，结合官方文档深入学习。